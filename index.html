<!DOCTYPE html>
<html>
	<head>
		<script
			type="text/javascript"
			src="https://getfirebug.com/firebug-lite-debug.js"></script>
		<meta
			name="description"
			content="CS4406 Computer Graphics - Methane Molecule" />
		<meta charset="utf-8" />
		<title>3D Earth</title>
		<style>
			#container {
				background: #000000;
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<div id="container"></div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

		<script>
			// Set the scene size
			var WIDTH = 500,
				HEIGHT = 500;

			// Camera attributes
			var VIEW_ANGLE = 45,
				ASPECT = WIDTH / HEIGHT,
				NEAR = 1,
				FAR = 1000;

			// Get the DOM element to attach to
			var container = document.getElementById("container");

			// Create a WebGL renderer, camera, and a scene
			var renderer = new THREE.WebGLRenderer();
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);
			camera.position.z = 200;
			scene.add(camera);

			// Set up the camera controls
			var cameraControls = new THREE.OrbitControls(camera, renderer.domElement);
			cameraControls.autoRotate = true;

			// Start the renderer
			renderer.setSize(WIDTH, HEIGHT);
			container.appendChild(renderer.domElement);

			// Initialize geometry, materials, and textures for Earth and Moon
			var earthGeometry = new THREE.SphereGeometry(30, 32, 32);
			var earthTexture = new THREE.TextureLoader().load(
				"https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/300px-The_Earth_seen_from_Apollo_17.jpg"
			);
			var earthMaterial = new THREE.MeshPhongMaterial({ map: earthTexture });
			var earth = new THREE.Mesh(earthGeometry, earthMaterial);
			earth.position.set(0, 0, 0);
			scene.add(earth);

			var moonGeometry = new THREE.SphereGeometry(10, 32, 32);
			var moonTexture = new THREE.TextureLoader().load(
				"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/280px-FullMoon2010.jpg"
			);
			var moonMaterial = new THREE.MeshPhongMaterial({ map: moonTexture });
			var moon = new THREE.Mesh(moonGeometry, moonMaterial);
			moon.position.set(50, 0, 0);
			scene.add(moon);

			// Add a light source to simulate day/night on Earth
			var light = new THREE.PointLight(0xffffff, 1, 1000);
			light.position.set(100, 0, 0);
			scene.add(light);

			// Animation variables
			var moonOrbitRadius = 50;
			var moonOrbitSpeed = 0.01;
			var moonRotationSpeed = 0.05;
			var earthRotationSpeed = 0.01;
			var moonAngle = 0;

			// Define the render function
			function render() {
				cameraControls.update(); // Update camera controls
				renderer.render(scene, camera); // Render the scene
			}

			// Animate the scene
			function animate() {
				requestAnimationFrame(animate);

				// Rotate the Earth
				earth.rotation.y += earthRotationSpeed;

				// Update Moon's position and rotation
				moonAngle += moonOrbitSpeed;
				moon.position.set(
					moonOrbitRadius * Math.cos(moonAngle),
					0,
					moonOrbitRadius * Math.sin(moonAngle)
				);
				moon.rotation.y += moonRotationSpeed;

				// Render the scene
				render();
			}

			animate();
		</script>
	</body>
</html>
